Разработайте бота для туристической компании со следующей функциональностью:
1) Консультация о погоде в городах и странах мира;
2) Оформление заявки в туристическом агентстве на подбор тура с заданными параметрами.
На старте машина представляется ботом туристической компании «Just Tour» и рассказывает о проблемах, в решении которых она может помочь. После этого бот побуждает пользователя продолжить диалог. Если пользователь уже общался с ботом и представлялся, на старте машина обращается к человеку по имени.
1. Если пользователь из любой точки диалога задает запрос, цель которого узнать погоду, бот проверяет, что в запросе или предыдущем диалоге присутствуют указания на:
• город/страну
• дату.
Недостающие параметры уточняются ботом в последующем диалоге с пользователем.
После получения всех параметров бот отправляет данные в третью систему и выдаёт пользователю прогноз погоды в нужном городе или нужной стране на указанную дату.
В качестве третьей системы используйте любой сервис, способный предоставить информацию о погоде на конкретную дату в городах и странах мира (например, сервис Openweathermap).
После получения результатов:
• если температура воздуха слишком низкая, пользователю задается вопрос о том, действительно ли он планирует поездку в страну с холодным климатом;
• если температура воздуха слишком высокая, пользователю задается вопрос о том, действительно ли он планирует поездку в страну с жарким климатом;
• если температура воздуха средняя, пользователю задается вопрос о том, действительно ли он планирует поездку в страну с умеренным климатом.
1.1. Если пользователь отвечает утвердительно, бот предлагает оформить тур в страну, которой человек интересовался, или продолжить оформление уже начатой заявки, если таковая имеется.
Обратите внимание: при продолжении работы с начатой заявкой названные пользователем в предыдущем диалоге параметры заявки повторно спрашивать не надо.
В случае, если пользователь отказывается продолжать заполнение заявки или начинать оформление нового тура, бот предлагает узнать о климате в любой другой стране мира.
1.2. Если пользователь отвечает отрицательно, бот предлагает узнать погоду в другой стране или другом городе.
1.3. Если пользователь в запросе изменяет параметры прогноза (город или дату; например, «а в Тайланде?», «а на завтра?»), выводится погода для новых данных.
2. Если пользователь хочет оформить заявку на тур:
• из диалога о погоде: сразу переходим к п.2.1.
• иначе: бот спрашивает, в какой город/какую страну пользователю хочется отправиться. Если пользователь не определился со страной, бот начинает заполнение заявки, объявив клиенту, что с подбором ему поможет менеджер.
2.1. Для заполнения заявки бот выясняет у пользователя:
• количество людей в поездке
• количество детей в поездке
• бюджет поездки
• дату начала поездки
• длительность поездки
• желаемую "звездность" отеля
• имя пользователя
• номер телефона для связи
• комментарий для менеджера в свободной форме.
Бот задаёт вопросы для выяснения всех указанных выше параметров.
Заявка не отправляется без имени пользователя и номера телефона, в остальных полях допускаются неопределенные значения, вроде "-", "не знаю" и т.д.
Собранные данные отправляются на почтовый ящик разработчика. Для отправки письма используется smtp-сервер любого почтового клиента (mail, gmail, yandex, т.д.).
• если письмо отправлено успешно, пользователю сообщается, что в ближайшее время с ним свяжется менеджер компании. После этого бот прощается.
• если при отправке письма возникли неполадки, бот информирует пользователя об этом. Клиенту предлагается обратиться за подбором тура в компанию по телефону 8(812)000-00-00.